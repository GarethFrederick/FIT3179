<!DOCTYPE html>
<html>
  <head>
    <title>European Union Overview</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.15.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Fondamento&family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <h1>European Union Overview</h1>
    <p>The European Union (EU) is a political and economic alliance of 27 European nations formed to promote peace, stability, and prosperity. Established in the aftermath of World War II, the EU has evolved into a unique supranational organization. It boasts a single market, a common currency (the Euro, used by 19 member states), and shared institutions like the European Parliament and European Commission.</p>
    <p>One of the EU's primary objectives is to foster cooperation across various domains, including trade, environmental protection, and social policies. It is deeply committed to upholding democratic principles, human rights, and the rule of law.</p>
    <p>Beyond its borders, the EU plays a pivotal role in shaping the future of Europe and addressing global challenges. Its substantial economic output provides a foundation for the insights presented in the following visualizations.</p>
    <h2>GDP of EU from 2006 to 2019</h2>
    <p>This visualization shows how EU GDP per Capita adjusted for inflation has changed from 2006 to 2019 .</p>
    <div id="visualization1">
      <script type="text/javascript">
        const spec1 = {
          "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
          "width": 600,
          "height": 600,
          "title": "EU GDP per Capita Adjusted for Inflation",
          "data": {
            "url": "https://raw.githubusercontent.com/GarethFrederick/FIT3179/main/Data/20062019GDP.csv",
            "format": {"type": "csv"}
          },
          "params": [
            {
              "name": "Current_Year",
              "value": 2006,
              "bind": {
                "input": "range",
                "min": 2006,
                "max": 2019,
                "step": 1,
                "name": "Year: "
              }
            }
          ],
          "transform": [
            {
              "lookup": "country",
              "from": {
                "data": {
                  "url": "https://raw.githubusercontent.com/GarethFrederick/FIT3179/main/Data/ne_50m_admin_0_countries.json",
                  "format": {"type": "topojson", "feature": "ne_50m_admin_0_countries"}
                },
                "key": "properties.NAME",
                "fields": ["properties", "type", "geometry"]
              }
            },
            {"filter": "datum.year == Current_Year"}
          ],
          "projection": {"type": "mercator"},
          "mark": {"type": "geoshape", "stroke": "black", "strokeWidth": 1},
          "encoding": {
            "color": {
              "field": "GDP/Capita",
              "type": "quantitative",
              "scale": {
                "type": "linear",
                "domain": [5630, 112000],
                "range": ["#6baed6", "#4292c6", "#2171b5", "#08519c", "#08306b"]
              },
              "title": "GDP per Capita (US$)",
              "legend": {"title": "GDP per Capita", "orient": "right"}
            },
            "tooltip": [
              {"field": "properties.NAME", "type": "nominal", "title": "Country: "},
              {
                "field": "GDP/Capita",
                "type": "quantitative",
                "title": "GDP per Capita (US$): "
              }
            ]
          },
          "config": {}
        }
        vegaEmbed("#visualization1", spec1, {
          mode: "vega-lite", "actions": false
        }).then(console.log).catch(console.warn);
      </script>
    </div>
    <h2>EU Growth Rate 2006 to 2019</h2>
    <p>This visualization illustrates the growth rates of the European Union from 2006 to 2019.</p>
    <div id="visualization2">
      <script>
        const spec2 = {
          "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
          "title": "EU Growth Rates from 1994 to 2019",
          "config": {
            "view": {
              "width": 600,
              "height": 450
            }
          },
          "data": {
            "url": "https://raw.githubusercontent.com/GarethFrederick/FIT3179/main/Data/eu_growth.csv"
          },
          "layer": [{
            "mark": {
              "type": "line",
              "point": true
            },
            "encoding": {
              "x": {
                "field": "year",
                "type": "temporal",
                "axis": {
                  "title": "Year",
                  "labelFontSize": 12,
                  "titleFontSize": 14
                }
              },
              "y": {
                "field": "value",
                "type": "quantitative",
                "axis": {
                  "title": "Growth Rate (%)",
                  "labelFontSize": 12,
                  "titleFontSize": 14
                },
                "scale": {
                  "domain": [-20, 20]
                }
              },
              "color": {
                "field": "country",
                "type": "nominal",
                "legend": null,
                "scale": {
                  "scheme": "category10"
                }
              },
              "tooltip": [{
                "field": "country",
                "title": "Country/Measure: "
              }, {
                "field": "year",
                "title": "Year: ",
                "type": "temporal",
                "timeUnit": "year"
              }, {
                "field": "value",
                "title": "Growth Rate (%): ",
                "format": ".3f"
              }]
            },
            "transform": [{
              "filter": {
                "selection": "country_filter"
              }
            }],
            "selection": {
              "country_filter": {
                "type": "single",
                "fields": ["country"],
                "init": {
                  "country": "Average"
                },
                "bind": {
                  "input": "select",
                  "options": ["Average", "Austria", "Belgium", "Bulgaria", "Cyprus", "Czechia", "Germany", "Denmark", "Spain", "Estonia", "Finland", "France", "Greece", "Croatia", "Hungary", "Ireland", "Italy", "Lithuania", "Luxembourg", "Latvia", "Malta", "Netherlands", "Poland", "Portugal", "Romania", "Slovakia", "Slovenia", "Sweden"],
                  "name": "Country Selection"
                }
              }
            }
          }, {
            "mark": {
              "type": "text",
              "align": "right",
              "baseline": "middle",
              "dx": 10,
              "fontSize": 11.5
            },
            "encoding": {
              "x": {
                "value": 205
              },
              "y": {
                "value": 310
              },
              "text": {
                "value": "2008 Global Financial Crisis"
              },
              "color": {
                "value": "black"
              }
            }
          }]
        };
        vegaEmbed("#visualization2", spec2, {
          mode: "vega-lite", "actions": false
        }).then(console.log).catch(console.warn);
      </script>
    </div>
    <h2>EU Key Indicators</h2>
    <p>This radar chart displays key indicators for the European Union, including Human Development Index (HDI), Democracy, Sustainable Development Index(SDI), Happiness, and Gender Equality Index(GEI).</p>
    <div id="visualization3">
      <script>
        const spec3 = {
          "$schema": "https://vega.github.io/schema/vega/v5.json",
          "title": {
            "text": "Key Indicator Index of EU",
            "align": "right"
          },
          "width": 400,
          "height": 400,
          "padding": 40,
          "autosize": {
            "type": "none",
            "contains": "padding"
          },
          "signals": [{
            "name": "radius",
            "update": "width / 2"
          }, {
            "name": "Year",
            "value": "Choose",
            "bind": {
              "input": "select",
              "options": ["Choose", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"]
            }
          }],
          "data": [{
            "name": "table",
            "url": "https://raw.githubusercontent.com/GarethFrederick/FIT3179/main/Data/Index.csv",
            "format": {
              "type": "csv",
              "delimiter": ","
            },
            "transform": [{
              "type": "filter",
              "expr": "Year === null || datum.Year === Year"
            }]
          }, {
            "name": "keys",
            "source": "table",
            "transform": [{
              "type": "aggregate",
              "groupby": ["Index"]
            }]
          }],
          "scales": [{
            "name": "angular",
            "type": "point",
            "range": {
              "signal": "[-PI, PI]"
            },
            "padding": 0.5,
            "domain": {
              "data": "table",
              "field": "Index"
            }
          }, {
            "name": "radial",
            "type": "linear",
            "range": {
              "signal": "[0, radius]"
            },
            "zero": true,
            "nice": false,
            "domain": {
              "data": "table",
              "field": "value"
            },
            "domainMin": 0
          }, {
            "name": "color",
            "type": "ordinal",
            "domain": {
              "data": "table",
              "field": "Year"
            },
            "range": {
              "scheme": "category10"
            }
          }],
          "encode": {
            "enter": {
              "x": {
                "signal": "radius"
              },
              "y": {
                "signal": "radius"
              }
            }
          },
          "marks": [{
            "type": "group",
            "name": "categories",
            "zindex": 1,
            "from": {
              "facet": {
                "data": "table",
                "name": "facet",
                "groupby": ["Year"]
              }
            },
            "filter": {
              "selection": "year_filter"
            },
            "marks": [{
              "type": "line",
              "name": "category-line",
              "from": {
                "data": "facet"
              },
              "encode": {
                "enter": {
                  "interpolate": {
                    "value": "linear-closed"
                  },
                  "x": {
                    "signal": "scale('radial', datum.value) * cos(scale('angular', datum.Index))"
                  },
                  "y": {
                    "signal": "scale('radial', datum.value) * sin(scale('angular', datum.Index))"
                  },
                  "stroke": {
                    "scale": "color",
                    "field": "Year"
                  },
                  "strokeWidth": {
                    "value": 1
                  },
                  "fill": {
                    "scale": "color",
                    "field": "Year"
                  },
                  "fillOpacity": {
                    "value": 0.1
                  }
                },
                "update": {
                  "tooltip": {
                    "signal": "datum.Index + ': ' + datum.value"
                  }
                }
              }
            }]
          }, {
            "type": "rule",
            "name": "radial-grid",
            "from": {
              "data": "keys"
            },
            "zindex": 0,
            "encode": {
              "enter": {
                "x": {
                  "value": 0
                },
                "y": {
                  "value": 0
                },
                "x2": {
                  "signal": "radius * cos(scale('angular', datum.Index))"
                },
                "y2": {
                  "signal": "radius * sin(scale('angular', datum.Index))"
                },
                "stroke": {
                  "value": "lightgray"
                },
                "strokeWidth": {
                  "value": 1
                }
              }
            }
          }, {
            "type": "text",
            "name": "key-label",
            "from": {
              "data": "keys"
            },
            "zindex": 1,
            "encode": {
              "enter": {
                "x": {
                  "signal": "(radius + 5) * cos(scale('angular', datum.Index))"
                },
                "y": {
                  "signal": "(radius + 5) * sin(scale('angular', datum.Index))"
                },
                "text": {
                  "field": "Index"
                },
                "align": [{
                  "test": "abs(scale('angular', datum.Index)) > PI / 2",
                  "value": "right"
                }, {
                  "value": "left"
                }],
                "baseline": [{
                  "test": "scale('angular', datum.Index) > 0",
                  "value": "top"
                }, {
                  "test": "scale('angular', datum.Index) == 0",
                  "value": "middle"
                }, {
                  "value": "bottom"
                }],
                "fill": {
                  "value": "black"
                },
                "fontWeight": {
                  "value": "bold"
                }
              }
            }
          }, {
            "type": "line",
            "name": "outer-line",
            "from": {
              "data": "radial-grid"
            },
            "encode": {
              "enter": {
                "interpolate": {
                  "value": "linear-closed"
                },
                "x": {
                  "field": "x2"
                },
                "y": {
                  "field": "y2"
                },
                "stroke": {
                  "value": "lightgray"
                },
                "strokeWidth": {
                  "value": 1
                }
              }
            }
          }],
          "config": {}
        };
        vegaEmbed("#visualization3", spec3, {
          mode: "vega-lite", "actions": false
        }).then(console.log).catch(console.warn);
      </script>
    </div>
  </body>
</html>
